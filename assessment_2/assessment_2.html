<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Student number: 23083053">

<title>Agent-Based Modelling Assessment 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="assessment_2_files/libs/clipboard/clipboard.min.js"></script>
<script src="assessment_2_files/libs/quarto-html/quarto.js"></script>
<script src="assessment_2_files/libs/quarto-html/popper.min.js"></script>
<script src="assessment_2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assessment_2_files/libs/quarto-html/anchor.min.js"></script>
<link href="assessment_2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assessment_2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assessment_2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assessment_2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assessment_2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="..\assessment_2.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Agent-Based Modelling Assessment 2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Student number: 23083053 </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>Word count: 1,000 words</p>
<section id="research-question" class="level2">
<h2 class="anchored" data-anchor-id="research-question">Research Question</h2>
<p>How does the urban morphology change when people and buildings effectively consider externalities of development on the surrounding environment, rather than simply aiming to maximise its own amenity? What is the ideal form of development that can maximise the amenity of all residents within the area?</p>
</section>
<section id="odd-description" class="level2">
<h2 class="anchored" data-anchor-id="odd-description">ODD Description</h2>
<p>The model is explained in this section using the ODD (Overview, Design concepts, Details) protocol <span class="citation" data-cites="grimm2006">(<a href="#ref-grimm2006" role="doc-biblioref">Grimm <em>et al.</em>, 2006</a>)</span>, updated by <span class="citation" data-cites="grimm2020">Grimm <em>et al.</em> (<a href="#ref-grimm2020" role="doc-biblioref">2020</a>)</span>.</p>
<section id="purpose-and-patterns" class="level3">
<h3 class="anchored" data-anchor-id="purpose-and-patterns">Purpose and Patterns</h3>
<p>The model simulates the amenity of developments and its impact on the surrounding environment, and explores the optimal built-up form considering its externalities. This model observes change in the skyline depending on ‘selfishness’ - the extent to which externalities are considered within individuals’ choices.</p>
<div id="fig-screenshot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="image/screenshot_model.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Screenshot of the model, showing buildings created from stacking units, their shadows, and last movement of unit.</figcaption>
</figure>
</div>
</section>
<section id="entities-state-variables-and-scales" class="level3">
<h3 class="anchored" data-anchor-id="entities-state-variables-and-scales">Entities, State Variables, and Scales</h3>
<p>The model is a 2-dimensional simplification of the 3-dimensional world into a vertical cylinder with dimensions listed in <a href="#tbl-world">Table&nbsp;1</a>. The x- and y-axes represent location and height respectively. One patch is the size of a building unit: the width scales to one building’s width, and the height scales to one level height. Representation of components are summarised in <a href="#tbl-entities">Table&nbsp;2</a>.</p>
<div id="tbl-world" class="anchored">
<table class="table">
<caption>Table&nbsp;1: Dimensions of the modelled world.</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Feature</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Additional Information</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>min-pxcor</code></td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">100 locations in total</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>max-pxcor</code></td>
<td style="text-align: right;">99</td>
<td style="text-align: left;">The world wraps horizontally to express a wider area.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>min-pycor</code></td>
<td style="text-align: right;">-1</td>
<td style="text-align: left;">Patches on <code>pycor = -1</code> are used to represent the ground.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>max-pycor</code></td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">Height of buildings not expected to surpass this value.</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl-entities" class="anchored">
<table class="table">
<caption>Table&nbsp;2: Entities of model</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Representation in model</th>
<th style="text-align: left;">Component</th>
<th style="text-align: left;">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Patches</td>
<td style="text-align: left;">Ground and the surrounding environment</td>
<td style="text-align: left;">Lowermost row of patches (<code>pycor = -1</code>) represent the ground, all others show the surrounding environment</td>
</tr>
<tr class="even">
<td style="text-align: left;">Turtles</td>
<td style="text-align: left;">Building units</td>
<td style="text-align: left;">Stacked on top of each other to form multi-storey buildings, shown as blue circles in <a href="#fig-screenshot">Figure&nbsp;1</a>. The amenity level is calculated based on the view, access to sunlight, access to open space, and the price of the property on the patch.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Time step</td>
<td style="text-align: left;">One relocation of building unit</td>
<td style="text-align: left;">In one time step building units are relocated to a different position; time steps are not representations of actual temporal measures.</td>
</tr>
</tbody>
</table>
</div>
<p>Variables are shown in <a href="#tbl-global-variables">Table&nbsp;3</a>, <a href="#tbl-patch-variables">Table&nbsp;4</a> and <a href="#tbl-turtle-variables">Table&nbsp;5</a>.</p>
<div id="tbl-global-variables" class="anchored">
<table class="table">
<caption>Table&nbsp;3: Global variables used in model</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 50%">
<col style="width: 15%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Global Variables</th>
<th style="text-align: left;">Explanation</th>
<th style="text-align: left;">Possible Values</th>
<th style="text-align: left;">Input from Interface</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>floor-area-percentage</code></td>
<td style="text-align: left;">The ratio of building units to the number of spaces in the world</td>
<td style="text-align: left;">0 - 500 (%)</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>num-units</code></td>
<td style="text-align: left;">The number of building units (turtles) in model, calculated as <code>world-width</code> <span class="math inline">\(\times\)</span> <code>floor-area-percentage</code> / 100</td>
<td style="text-align: left;">0 - <code>world-width</code> <span class="math inline">\(\times\)</span> 5</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>sun-height</code></td>
<td style="text-align: left;">Solar altitude in degrees, used to calculate shadows from buildings</td>
<td style="text-align: left;">0 - 90 (deg)</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>selfishness</code></td>
<td style="text-align: left;">Dictates the ratio of <code>amenity</code> and <code>hate</code> when calculating the <code>net-amenity</code>: 100 % indicates turtles only consider <code>amenity</code> of themselves, while 0 % indicates they only consider <code>hate</code> from others</td>
<td style="text-align: left;">0 - 100 (%)</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>open-range</code></td>
<td style="text-align: left;">The maximum distance turtles consider accessible to open spaces</td>
<td style="text-align: left;">0 - 20</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>max-view</code></td>
<td style="text-align: left;">The maximum distance turtles consider for the view: any buildings further away are not considered obstructing the view from building unit</td>
<td style="text-align: left;">0 - 20</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>light-weight</code>, <code>view-weight</code>, <code>open-weight</code>, <code>price-weight</code></td>
<td style="text-align: left;">Weight of each variable when calculating <code>amenity</code> and <code>hate</code>. One step of shadow, one unit of view, one open space, and price increase for one level up correspond to the same impact.</td>
<td style="text-align: left;">0 - 10</td>
<td style="text-align: left;">Yes</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>visualise-net-amenity</code></td>
<td style="text-align: left;">When turned on, the <code>net-amenity</code> of each patch and turtle are shown in the view. When off, <code>shadow</code> visualised for patches and <code>amenity</code> for turtles.</td>
<td style="text-align: left;">True / False</td>
<td style="text-align: left;">Yes</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl-patch-variables" class="anchored">
<table class="table">
<caption>Table&nbsp;4: Patch variables, only assigned to patches above ground unless otherwise stated.</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 60%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Patch Variable</th>
<th style="text-align: left;">Explanation</th>
<th style="text-align: left;">Possible Values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>area-type</code></td>
<td style="text-align: left;">Assigned to ground: classifies if location is an open area or a building exists</td>
<td style="text-align: left;">Open / Built</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>building-height</code></td>
<td style="text-align: left;">Assigned to ground: the height of building on the x position</td>
<td style="text-align: left;">0 - <code>max-pycor</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>num-neighbours</code></td>
<td style="text-align: left;">Assigned to both ground and above ground: the number of building units within <code>open-range</code>, showing potential users of open space if patch was transformed into one</td>
<td style="text-align: left;">0 - (<code>max-pycor</code> * <code>open-range</code> * 2)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>price</code></td>
<td style="text-align: left;">The property price of building unit at patch. Assumed to be linear with height, calculated as <code>pycor</code> + 1</td>
<td style="text-align: left;">1 - (<code>max-pycor</code> + 1)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>shadow</code></td>
<td style="text-align: left;">The strength of shadow cast by tall buildings on the south. Shadows are created on the right side of the building - considered as the northern side (assuming the northern hemisphere context). Shadows are simulated to be more intense according to the distance to the top of shadow.</td>
<td style="text-align: left;">0 - maximum</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>view-north</code></td>
<td style="text-align: left;">Cells between self to the nearest building unit on the north at the same level, capped at <code>max-view</code></td>
<td style="text-align: left;">0 - <code>max-view</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>view-south</code></td>
<td style="text-align: left;">Cells between self to the nearest building unit on the south at the same level, capped at <code>max-view</code></td>
<td style="text-align: left;">0 - <code>max-view</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>open-space</code></td>
<td style="text-align: left;">The number of open space the building unit has access to. A unit has access to open spaces within <code>open-range</code> cells horizontally.</td>
<td style="text-align: left;">0 - (<code>open-range</code> <span class="math inline">\(\times\)</span> 2)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>patch-amenity</code></td>
<td style="text-align: left;">The total benefit the building unit at the patch achieves from the view and open space, reducted by the price and shadow, each weighted using the corresponding <code>xx-weight</code> variable.</td>
<td style="text-align: left;">any value</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>patch-hate</code></td>
<td style="text-align: left;">The total amount of amenity the other building units are losing (or will lose) as a result of a building cell existing in this patch. When not at the top of building, the removal of the unit results in a shorter building, which is the comparison made in this variable.</td>
<td style="text-align: left;">any value</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>patch-net-amenity</code></td>
<td style="text-align: left;">The net amenity the building has on the whole world, calculating the <code>amenity</code> minus the <code>hate</code> from others by considering <code>selfishness</code>. Calculated as (<code>amenity</code> <span class="math inline">\(\times\)</span> <code>selfishness</code> - hate <span class="math inline">\(\times\)</span> (100 - <code>selfishness</code>)) / 100</td>
<td style="text-align: left;">any value</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>is-buildable?</code></td>
<td style="text-align: left;">Whether a building unit can exist in the patch without floating. <code>true</code> if all cells below are filled to the ground with building units; this can be summarised as: it is located directly above the ground (<code>pxcor</code> = 0), is already occupied with a building unit, or the patch directly below is occupied with a building unit.</td>
<td style="text-align: left;">True / False</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl-turtle-variables" class="anchored">
<table class="table">
<caption>Table&nbsp;5: Turtle variables. Amenity-related values are inherited from corresponding patch variables.</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 60%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Turtle Variable</th>
<th style="text-align: left;">Explanation</th>
<th style="text-align: left;">Possible Values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>amenity</code></td>
<td style="text-align: left;">The total amount of amenity of building unit. Equal to <code>patch-amenity</code> of the patch the turtle is on.</td>
<td style="text-align: left;">any value</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>hate</code></td>
<td style="text-align: left;">The total amount of amenity the unit is decreasing from all other patches. Equal to <code>patch-hate</code> of the patch the turtle is on.</td>
<td style="text-align: left;">any value</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>net-amenity</code></td>
<td style="text-align: left;">The net amenity the building has on the world considering <code>selfishness</code> Equal to <code>patch-net-amenity</code> of te patch the turtle is on.</td>
<td style="text-align: left;">any value</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>is-top?</code></td>
<td style="text-align: left;">A boolean variable storing whether the building unit</td>
<td style="text-align: left;">True / False</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="process-overview-and-scheduling" class="level3">
<h3 class="anchored" data-anchor-id="process-overview-and-scheduling">Process Overview and Scheduling</h3>
<div id="fig-flowchart" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="image/flowchart.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Flowchart of the process</figcaption>
</figure>
</div>
<p>The flowchart is shown in <a href="#fig-flowchart">Figure&nbsp;2</a>. In each time step, amenity measures are calculated for all buildable patches, and one low-performing unit is relocated to maximise the <code>net-amenity</code>. This process is explained in detail at <a href="#sec-relocation">Section&nbsp;2.7.2</a>.</p>
<p>The urban morphology is observed by the distribution of building heights. Performance of the model is measured using the average <code>amenity</code> of building units. These are reported every time step.</p>
</section>
<section id="design-concepts" class="level3">
<h3 class="anchored" data-anchor-id="design-concepts">Design Concepts</h3>
<p>This report covers the basic principles, objectives and observation of the ODD protocol.</p>
<section id="basic-principles" class="level4">
<h4 class="anchored" data-anchor-id="basic-principles">Basic Principles</h4>
<p>Large scale developments provide high amenity to its occupants, but impact the surrounding environment by blocking views and sunlight. The significance of these externalities are highlighted by regulations aiming to maintain these benefits <span class="citation" data-cites="li2019a tavernor2010">(<a href="#ref-tavernor2010" role="doc-biblioref">Tavernor and Gassner, 2010</a>; <a href="#ref-li2019a" role="doc-biblioref">Li <em>et al.</em>, 2019</a>)</span>, lawsuits between large-scale developments and surrounding residents <span class="citation" data-cites="sorensen2011">(<a href="#ref-sorensen2011" role="doc-biblioref">Sorensen, 2011</a>)</span>, and environmental impact assessments internalising externalities <span class="citation" data-cites="glasson2013 arts2005">(<a href="#ref-arts2005" role="doc-biblioref">Arts, Tomlinson and Voogd, 2005</a>; <a href="#ref-glasson2013" role="doc-biblioref">Glasson and Therivel, 2013</a>)</span>. This model explores the optimal vertical allocation of development by quantifying and embedding externalities into individual decisions.</p>
</section>
<section id="objectives" class="level4">
<h4 class="anchored" data-anchor-id="objectives">Objectives</h4>
<p>Each unit seeks to maximise the <code>net-amenity</code>, shown in <a href="#tbl-turtle-variables">Table&nbsp;5</a> and explained at <a href="#sec-amenity-calculation">Section&nbsp;2.7.1</a>. They aim to achieve an ‘optimal balance’ between maximising its satisfaction and mitigating its impact on surroundings.</p>
</section>
<section id="sec-observation" class="level4">
<h4 class="anchored" data-anchor-id="sec-observation">Observation</h4>
<p>Two factors are observed: distribution of building heights and the amenity of each unit. Each criteria is observed in plots, monitors, and the view within the interface with measurements summarised in <a href="#tbl-observations">Table&nbsp;6</a>.</p>
<div id="tbl-observations" class="anchored">
<table class="table">
<caption>Table&nbsp;6: Observations in the model</caption>
<colgroup>
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 25%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Factor</th>
<th style="text-align: left;">Sub-factor</th>
<th style="text-align: left;">Observation</th>
<th style="text-align: left;">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Building height</td>
<td style="text-align: left;">Distribution</td>
<td style="text-align: left;">Histogram / standard deviation of height</td>
<td style="text-align: left;">A high standard deviation indicates existence of high-rise buildings and open spaces, low variance indicates buildings aligned around mean height of (<code>floor-area-percentage</code> / 100)</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Temporal change</td>
<td style="text-align: left;">Change in standard deviation of height</td>
<td style="text-align: left;">Temporal change of standard deviation is shown with plot on the interface.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Amenity</td>
<td style="text-align: left;">Distribution</td>
<td style="text-align: left;">Histogram of <code>amenity</code></td>
<td style="text-align: left;">The distribution of amenity illustrates the inequality between each unit. The colour of the turtle also illustrates the amenity of each turtle.</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Temporal Change</td>
<td style="text-align: left;">Change in mean <code>amenity</code> and <code>hate</code></td>
<td style="text-align: left;">Shown in plot in interface. While <code>amenity</code> is the main factor to observe, the <code>hate</code> is shown as well.</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="initialisation" class="level3">
<h3 class="anchored" data-anchor-id="initialisation">Initialisation</h3>
<p>The model is initialised as an abstract physical space, accommodating units determined by the <code>floor-area-percentage</code>. Initialisation procedure is as follows:</p>
<ol type="1">
<li>Patches are set up, the bottom row (<code>pycor = -1</code>) as the ground.</li>
<li>Number of building units are calculated from the <code>floor-area-percentage</code> and the width of world.</li>
<li>Units are allocated random x-coordinates and stacked. Model is initialised differently every time due to this random allocation.</li>
</ol>
</section>
<section id="input-data" class="level3">
<h3 class="anchored" data-anchor-id="input-data">Input Data</h3>
<p>The model does not use input data to represent time-varying processes.</p>
</section>
<section id="submodels" class="level3">
<h3 class="anchored" data-anchor-id="submodels">Submodels</h3>
<p>The calculation of amenity measures and the relocation process are explained in this section.</p>
<section id="sec-amenity-calculation" class="level4">
<h4 class="anchored" data-anchor-id="sec-amenity-calculation">Calculation of Amenity</h4>
<p>Amenity is calculated from four components: view, access to open space, accessibility to light, and price, as illustrated in <a href="#fig-variables">Figure&nbsp;3</a>. <a href="#tbl-components-methodology">Table&nbsp;7</a> shows how each measure is quantified.</p>
<div id="fig-variables" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="image/variables.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Illustration of each amenity component</figcaption>
</figure>
</div>
<div id="tbl-components-methodology" class="anchored">
<table class="table">
<caption>Table&nbsp;7: The methodology to calculate each component. Variables in the notation column are used in <a href="#eq-amenity">Equation&nbsp;1</a>, <a href="#eq-hate">Equation&nbsp;2</a>, and <a href="#eq-net-amenity">Equation&nbsp;3</a>.</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 50%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Component</th>
<th style="text-align: right;">Notation</th>
<th style="text-align: left;">Methodology</th>
<th style="text-align: left;">Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">View</td>
<td style="text-align: right;"><span class="math inline">\(v(k)\)</span></td>
<td style="text-align: left;">Number of columns between the nearest building unit with the same height on each side, implemented in the model as <code>view-north</code> and <code>view-south</code> respectively. Each side capped at the global variable <code>max-view</code></td>
<td style="text-align: left;">0 - <code>max-view</code> for each side</td>
</tr>
<tr class="even">
<td style="text-align: left;">Open Space</td>
<td style="text-align: right;"><span class="math inline">\(o(k)\)</span></td>
<td style="text-align: left;">Number of open spaces (ground with no building units) within the horizontal distance of <code>open-range</code> from the unit.</td>
<td style="text-align: left;">0 - (<code>open-range</code> <span class="math inline">\(\times\)</span> 2)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sunlight</td>
<td style="text-align: right;"><span class="math inline">\(l(k)\)</span></td>
<td style="text-align: left;">Determined by the shadows cast by other building units. For each unit, the area of shadow made by itself and all units below are considered to be the triangular area north of the building, at an angle equal to the height of the sun. A shadow level of 1 is added to patches within this area, and iterated for all building units. Overlap of shadows calculated by units on the same building automatically create a more intense shadow at the bottom: one cell down, one level increase in shadow intensity, as observable as the gray-to-black gradation visible in <a href="#fig-screenshot">Figure&nbsp;1</a>. Patches with multiple high-rise buildings on its south are simulated to have a more intense shadow, replicating the cumulative impacts in real life.</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">Price</td>
<td style="text-align: right;"><span class="math inline">\(p(k)\)</span></td>
<td style="text-align: left;">Determined solely by the height of the building unit as (<code>pycor</code> + 1).</td>
<td style="text-align: left;">1 - (<code>max-pycor</code> + 1)</td>
</tr>
</tbody>
</table>
</div>
<p>For patch <span class="math inline">\(k\)</span>, <code>amenity</code> <span class="math inline">\(a(k)\)</span> is calculated by <a href="#eq-amenity">Equation&nbsp;1</a>. Each component is weighted by the corresponding weight parameter (<span class="math inline">\(\alpha\)</span>).</p>
<p><span id="eq-amenity"><span class="math display">\[
a(k) = \alpha_v v(k) + \alpha_o o(k) - \alpha_l l(k) - \alpha_p p(k)
\tag{1}\]</span></span></p>
<p>The <code>hate</code> (<span class="math inline">\(h(k)\)</span>) is the <code>amenity</code> lost due to the existence of, or if there existed, a building unit at <span class="math inline">\(k\)</span>, by blocking views, casting shadows, and consuming open space. This is calculated by <a href="#eq-hate">Equation&nbsp;2</a>, comparing the current environment and when unit is removed. Unit removal makes the building height lower, equivalent to removing the top unit of building.</p>
<p><span id="eq-hate"><span class="math display">\[
h(k) = \sum_j \Delta_k a(j) = \sum_j \left(a_k(j) - a_{\bar{k}}(j)\right)
\tag{2}\]</span></span></p>
<ul>
<li><span class="math inline">\(j\)</span>: patches influenced by <span class="math inline">\(k\)</span></li>
<li><span class="math inline">\(a_k(j)\)</span>: <code>amenity</code> of patch <span class="math inline">\(j\)</span> if building unit exists in <span class="math inline">\(k\)</span></li>
<li><span class="math inline">\(a_{\bar{k}}(j)\)</span>: <code>amenity</code> of patch <span class="math inline">\(j\)</span> if building unit does not exist in <span class="math inline">\(k\)</span></li>
</ul>
<p>The <code>net-amenity</code> <span class="math inline">\(A_k\)</span> is calculated by <a href="#eq-net-amenity">Equation&nbsp;3</a>, aggregating <code>amenity</code> and <code>hate</code> by the weighting parameter <code>selfishness</code> (<span class="math inline">\(\sigma\)</span> (%)). With 100% selfishness, units only consider their own amenity, and only consider impact mitigation on others when selfishness is 0.</p>
<p><span id="eq-net-amenity"><span class="math display">\[
A_k = \frac{\sigma a(k) - (100 - \sigma)h(k)}{100}
\tag{3}\]</span></span></p>
<p>The <code>amenity</code>, <code>hate</code>, and <code>net-amenity</code> of turtles are equal to corresponding values of the patch the unit resides.</p>
</section>
<section id="sec-relocation" class="level4">
<h4 class="anchored" data-anchor-id="sec-relocation">Relocation of Units</h4>
<p>One unit within the 5 lowest <code>net-amenity</code> is chosen to relocate to vacant buildable patches: either the top of an existing building or an open space. Units move to the patch that maximises the <code>net-amenity</code>.</p>
</section>
</section>
</section>
<section id="brief-methodology" class="level2">
<h2 class="anchored" data-anchor-id="brief-methodology">Brief Methodology</h2>
<p>The objective is to explore the relationship between selfishness and the amenity for different densities, and identifying the optimal morphology, given a specific combination of weight for amenity measures. BehaviorSpace is used to simulate different conditions in density and selfishness to maximise amenity. Variables and measurements are organised in <a href="#tbl-bs-variables">Table&nbsp;8</a> and <a href="#tbl-bs-measurements">Table&nbsp;9</a>. Each condition is repeated 10 times.</p>
<div id="tbl-bs-variables" class="anchored">
<table class="table">
<caption>Table&nbsp;8: Variables to change in BehaviorSpace experiment</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 55%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th style="text-align: right;">Range</th>
<th style="text-align: right;">Increments</th>
<th style="text-align: left;">Additional notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>floor-area-percentage</code></td>
<td style="text-align: right;">100 - 500</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">This factor is considered as given in an actual urban development context - a direct comparison between different percentages requires consideration.</td>
</tr>
<tr class="even">
<td><code>selfishness</code></td>
<td style="text-align: right;">0 - 100</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">Optimal selfishness within a fixed <code>floor-area-percentage</code> is explored. The optimal value is hypothesised at 50 % where <code>net-amenity</code> considers gains and losses equally - the morphology in this state is our research interest as well.</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl-bs-measurements" class="anchored">
<table class="table">
<caption>Table&nbsp;9: Observing measurements in BehaviorSpace experiment</caption>
<colgroup>
<col style="width: 30%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>Measurement</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>mean <code>amenity</code> of building units</td>
<td>Measurement to maximise in BehaviorSpace model</td>
</tr>
<tr class="even">
<td>standard deviation of <code>building-height</code></td>
<td>To gain insights on the morphology, by comparing the relationship between the building height and amenity.</td>
</tr>
</tbody>
</table>
</div>
<p>Measurements are observed under the usual state, assumed as <code>ticks</code> = <code>floor-area-percentage</code>. For each density level, we will determine <code>selfishness</code> that achieves the maximum <code>amenity</code> and the variance of the building height under the optimal condition. This will provide insights on the ideal environment maximising the overall amenity.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="references" class="level2 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-arts2005" class="csl-entry" role="listitem">
Arts, J., Tomlinson, P. and Voogd, H. (2005) <span>“<span>EIA</span> and <span>SEA</span> tiering: The missing link.”</span>
</div>
<div id="ref-glasson2013" class="csl-entry" role="listitem">
Glasson, J. and Therivel, R. (2013) <em>Introduction <span>To Environmental Impact Assessment</span></em>. 4th ed. London: Routledge. doi: <a href="https://doi.org/10.4324/9781315881218">10.4324/9781315881218</a>.
</div>
<div id="ref-grimm2006" class="csl-entry" role="listitem">
Grimm, V. <em>et al.</em> (2006) <span>“A standard protocol for describing individual-based and agent-based models,”</span> <em>Ecological Modelling</em>, 198(1), pp. 115–126. doi: <a href="https://doi.org/10.1016/j.ecolmodel.2006.04.023">10.1016/j.ecolmodel.2006.04.023</a>.
</div>
<div id="ref-grimm2020" class="csl-entry" role="listitem">
Grimm, V. <em>et al.</em> (2020) <span>“The <span>ODD</span> protocol for describing agent-based and other simulation models: <span>A</span> second update to improve clarity, replication, and structural realism,”</span> <em>Journal of Artificial Societies and Social Simulation</em>, 23(2).
</div>
<div id="ref-li2019a" class="csl-entry" role="listitem">
Li, L. <em>et al.</em> (2019) <span>“A <span>3D</span> spatial data model of the solar rights associated with individual residential properties,”</span> <em>Computers, Environment and Urban Systems</em>, 74, pp. 88–99. doi: <a href="https://doi.org/10.1016/j.compenvurbsys.2018.12.003">10.1016/j.compenvurbsys.2018.12.003</a>.
</div>
<div id="ref-sorensen2011" class="csl-entry" role="listitem">
Sorensen, A. (2011) <span>“Evolving <span>Property Rights</span> in <span>Japan</span>: <span>Patterns</span> and <span>Logics</span> of <span>Change</span>,”</span> <em>Urban Studies</em>, 48(3), pp. 471–491. doi: <a href="https://doi.org/10.1177/0042098010390241">10.1177/0042098010390241</a>.
</div>
<div id="ref-tavernor2010" class="csl-entry" role="listitem">
Tavernor, R. and Gassner, G. (2010) <span>“Visual consequences of the plan: <span>Managing London</span>’s changing skyline,”</span> <em>City, Culture and Society</em>, 1(2), pp. 99–108. doi: <a href="https://doi.org/10.1016/j.ccs.2010.06.001">10.1016/j.ccs.2010.06.001</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>